$(".addGroupCannle").click(function() {
	$(".ejectBg").hide();
})
$(".addTaskCannle").click(function() {
		$(".ejectBg").hide();
	})
	// 公用函数
var common = {
		//居中
		center: function(width, height, ele) {
			var pageWidth = $(window).width();
			var pageHeight = $(window).height();
			$(ele).css({
				"left": (pageWidth - width) / 2,
				"top": (pageHeight - height) / 2,
				"display": "block"
			})
			$(".ejectBg").show();
		}
	}
	// 头部下拉
$(".dorpBtn").mouseover(function() {
	$(this).next().show();
})
$(".dorpBtn").mouseout(function() {
	$(this).next().hide();
})
$(".dropBox").mouseover(function() {
	$(this).show();
})
$(".dropBox").mouseout(function() {
		$(this).hide();
	})
	//侧边导航
$(".secNav dl dt a.arrow").click(function() {
		$(this).parent().next().toggle();
		if ((this).hasClass("drop")) {
			$(this).addClass("drop");
		} else {
			$(this).removeClass("drop");
		}
	})
	//删除框
$(".delMgsBtn").click(function() {
	var width = $(".delMgs").width();
	var height = $(".delMgs").height();
	common.center(width, height, ".delMgs");
})
$(".delCannle").click(function() {
		$(".delMgs").hide();
		$(".ejectBg").hide();
	})
	//编辑分组
$(".editGroupBtn").click(function() {
	var width = $(".editGroup").width();
	var height = $(".editGroup").height();
	common.center(width, height, ".editGroup");
})
$(".editGroupCannle").click(function() {
		$(".ejectBg").hide();
		$(".editGroup").hide();
	})
	//任务编辑
$(".editTaskBtn").click(function() {
	var width = $(".editTask").width();
	var height = $(".editTask").height();
	common.center(width, height, ".editTask");
})
$(".editTaskCannle").click(function() {
		$(".ejectBg").hide();
		$(".editTask").hide();
	})
	//新建分组
$(".addGroupBtn").click(function() {
	var width = $(".addGroup").width();
	var height = $(".addGroup").height();
	common.center(width, height, ".addGroup");
	$(".ejectBg").show();
})
$(".addGroupCannle").click(function() {
		$(".addGroup").hide();
	})
	//新建任务
$(".addTaskBtn").click(function() {
	var width = $(".addTask").width();
	var height = $(".addTask").height();
	common.center(width, height, ".addTask");
})
$(".addTaskCannle").click(function() {
		$(".addTask").hide();
	})
	//编辑资产
$(".editMoneyBtn").click(function() {
	var width = $(".editMoney").width();
	var height = $(".editMoney").height();
	common.center(width, height, ".editMoney");
})
$(".editMoneyCannle").click(function() {
		$(".editMoney").hide();
		$(".ejectBg").hide();
	})
	//漏洞信息tab
$(".tab a").click(function() {
	if ($(this).attr("href") == "javascript:;") {
		var clkIndex = $(this).index();
		$(".tab a").removeClass("active");
		$(this).addClass("active");
		$(".tabBox li").hide();
		$(".tabBox li").eq(clkIndex).show();
	};
});
// 状态管理弹窗
$(".editStateCannle").click(function() {
	$(".editState").hide();
	$(".ejectBg").hide();
	$(".editState .addTab a").removeClass("hover");
	$(".editState .addTab a").eq(0).addClass("hover");
	$(".editState .stateInfo").find("p").hide();
	$(".editState .stateInfo").find("p").eq(0).show();
})
// 状态管理切换tab
$(".editState .addTab a").click(function(){
	var stateTabIndex = $(this).index();
	$(".editState .addTab a").removeClass("hover");
	$(this).addClass("hover");
	$(".editState .stateInfo").find("p").hide();
	$(".editState .stateInfo").find("p").eq(stateTabIndex).show();
})
function setCookie(name, value, time) {
	var strsec = getsec(time);
	var exp = new Date();
	exp.setTime(exp.getTime() + strsec * 1);
	document.cookie = name + "=" + escape(value) + ";expires=" + exp.toGMTString();
}

function getsec(str) {
	var str1 = str.substring(1, str.length) * 1;
	var str2 = str.substring(0, 1);
	if (str2 == "s") {
		return str1 * 1000;
	} else if (str2 == "h") {
		return str1 * 60 * 60 * 1000;
	} else if (str2 == "d") {
		return str1 * 24 * 60 * 60 * 1000;
	}
}

function getCookieValue(name) {
	var name = escape(name);
	var allcookies = document.cookie;
	name += "=";
	var pos = allcookies.indexOf(name);
	if (pos != -1) {
		var start = pos + name.length;
		var end = allcookies.indexOf(";", start);
		if (end == -1) end = allcookies.length;
		var value = allcookies.substring(start, end);
		return (value);
	} else {
		return false;
	}
}
//首页导航
$("#nav a").click(function() {
	var sort = $(this).parent().index();
	$("#nav a").removeClass("active");
	$(this).addClass("active");
	$(".slibar .secNav").hide();
	$(".slibar .secNav").eq(sort - 1).show();
	$("#main").attr("src",$(this).attr("data-href"));
	setTimeout(function(){	
		$(".main").css("height",$("#main").contents().find("body").height()+30+"px");
		$("#main").css("height",$("#main").contents().find("body").height()+30+"px");
	},200)
	setCookie("conav", sort, "d30");
})
$(document).ready(function() {
	var conav = getCookieValue("conav");
	if (conav) {
		$("#nav a").removeClass("active");
		$(".slibar .secNav").hide();
		$("#nav li").eq(conav).find("a").addClass("active");
		$(".slibar .secNav").eq(conav - 1).show();
		$("#main").attr("src",$("#nav li").eq(conav).find("a").attr("data-href"));
	}
})
$(".secNav a").click(function(){
	var href = $(this).attr("href");
	if (href != "javascript:;") {
		$(".secNav a").removeClass("hoverColor");
		$(this).addClass("hoverColor");
		setTimeout(function(){	
			$(".main").css("height",$("#main").contents().find("body").height()+30+"px");
			$("#main").css("height",$("#main").contents().find("body").height()+30+"px");
		},200)
	};
})